# ZeamiTerm Development Roadmap

## 概要

VS CodeとxtermのソースコードとZeamiTermの比較分析に基づいて、今後実装すべき機能のロードマップを定義します。

## 実装済み機能（Phase 1-2完了）

### ✅ 基本機能
- xterm.js + node-ptyによる基本ターミナル
- タブ管理システム
- 検索機能（SearchAddon）
- WebGLレンダリング
- カスタムコマンド（matrix、infinite等）
- 基本的なテーマサポート
- スプリットビュー
- 選択透明度の修正（xterm.jsフォーク）

## Phase 3: コア機能強化（2025 Q1）

### 🎯 シェル統合
**目的**: コマンドの実行状態を視覚的に追跡し、開発効率を向上

**実装内容**:
- **コマンド検出と装飾**
  - OSC 133シーケンスによるプロンプト/コマンド/実行追跡
  - コマンドの開始/終了マーカー表示
  - 終了コードインジケーター（成功/失敗の視覚表示）
  - コマンド実行時間の追跡と表示
- **コマンドナビゲーション**
  - Ctrl+Up/Downでコマンド間をジャンプ
  - コマンド履歴のクイックピック（ファジー検索）
- **作業ディレクトリ追跡**
  - 各コマンドでのCWD変更を記録
  - OSC 1337によるディレクトリ更新通知

### 🔗 高度なリンク検出
**目的**: ファイルパスやエラーメッセージを即座にアクション可能に

**実装内容**:
- **ファイルパス検出と検証**
  - 存在確認付きファイルリンク
  - ワークスペース相対パス解決
  - コマンド実行時のCWDベースの解決
- **エラー/警告検出**
  - コンパイラ出力のfile:line:column解析
  - スタックトレースの自動リンク化
- **Gitリモート検出**
  - GitリポジトリURLの自動検出とリンク化
- **ホバープレビュー**
  - ファイル内容のプレビュー表示
  - URL情報の表示

### 👤 ターミナルプロファイル
**目的**: 複数のシェル環境を効率的に管理

**実装内容**:
- **プロファイルシステム**
  - 複数シェル設定の定義（bash、zsh、fish等）
  - カスタム引数と環境変数の設定
  - プロファイル別のアイコンと色
- **シェル自動検出**
  - インストール済みシェルの検出
  - デフォルトシェルの選択UI
- **クイックスイッチ**
  - ドロップダウンによる高速切り替え

## Phase 4: ユーザビリティ向上（2025 Q2）

### 🔍 検索機能の強化
**実装内容**:
- 検索結果カウンターと現在位置表示
- 検索履歴の保存
- 検索結果のスクロールバー装飾
- 正規表現サポートの改善

### ♿ アクセシビリティ
**実装内容**:
- スクリーンリーダー対応の強化
- 高コントラストテーマの自動検出
- キーボードナビゲーションの改善
- カーソル位置の音声アナウンス

### 🌍 国際化サポート
**実装内容**:
- Unicode完全サポート（最新版対応）
- 絵文字レンダリングの改善
- プログラミングフォントリガチャ
- IME統合の改善（日本語入力）
- BiDiテキストサポート（右から左への言語）

### 📊 高度なタブ管理
**実装内容**:
- ターミナルグループ（タブのグループ化）
- ドラッグ&ドロップによるタブ移動
- ターミナルの永続化（セッション保存/復元）
- カスタムタブ名
- 同期入力（複数ターミナルへの同時入力）

## Phase 5: 高度な機能（2025 Q3）

### 🎨 テーマとカスタマイズ
**実装内容**:
- テーママーケットプレイス統合
- プロファイル別テーマ設定
- カーソルカスタマイズ（スタイル、点滅速度、色）
- 背景画像/エフェクト
- フォントリガチャコントロール

### 🚀 パフォーマンス最適化
**実装内容**:
- GPU アクセラレーション制御
- テクスチャアトラス最適化（より大きなアトラス）
- ダーティリージョン追跡（変更部分のみ再描画）
- フレームレート制限（バッテリー節約）
- メモリ使用量の動的制御

### 📈 プロセス管理UI
**実装内容**:
- プロセスツリーの視覚化
- リソースモニタリング（CPU/メモリ）
- プロセスシグナリングUI
- 環境変数エディター

### 🤖 インテリジェント機能
**実装内容**:
- AIパワードコマンド提案
- ポート検出とアクション提案
- エラー回復の提案
- Zeami CLIとの深い統合
- メッセージルーター＆自律開発支援（詳細: [MESSAGE_ROUTER_AND_AUTONOMOUS_DEV_SPEC.md](../specifications/MESSAGE_ROUTER_AND_AUTONOMOUS_DEV_SPEC.md)）

## Phase 6: 先進機能（2025 Q4）

### 🖼️ 画像とグラフィックス
**実装内容**:
- Sixelグラフィックプロトコル
- iTerm2画像プロトコル
- 画像キャッシュ管理
- プレースホルダーレンダリング

### 💾 データ管理
**実装内容**:
- ターミナルリプレイ（セッション記録/再生）
- エクスポート機能（テキスト/HTML）
- ターミナル専用クリップボード履歴
- ブロック/列選択モード

### 🔄 統合機能
**実装内容**:
- エディター統合（ファイルを直接開く）
- ワークスペース認識
- 拡張API（プラグインシステム）
- タスクランナー統合
- デバッガー統合

## 実装優先度

### 高優先度（ユーザーインパクト大、実装可能性高）
1. シェル統合（コマンド検出、装飾）
2. 高度なリンク検出
3. ターミナルプロファイル
4. 検索機能強化
5. クイックアクション/修正

### 中優先度（価値高、中程度の労力）
1. アクセシビリティ改善
2. Unicode/国際化サポート
3. 高度なタブ管理
4. テーママーケットプレイス
5. プロセス管理UI

### 低優先度（nice to have、高労力）
1. 画像/グラフィックスサポート
2. ターミナルリプレイ
3. AIパワード提案
4. 高度なデバッグ統合

## 技術的考慮事項

### アーキテクチャの拡張
- プラグインシステムの設計
- イベント駆動アーキテクチャの強化
- パフォーマンスメトリクスの実装

### 互換性
- xterm.js最新版への追従
- Electronのセキュリティベストプラクティス
- クロスプラットフォーム対応の維持

### テスト戦略
- E2Eテストの拡充
- パフォーマンステストの自動化
- アクセシビリティテストの導入

## 成功指標

- 起動時間: < 500ms
- メモリ使用量: < 200MB（通常使用時）
- レンダリングFPS: 60fps維持
- コマンド応答時間: < 10ms
- ユーザー満足度: > 90%

## 更新履歴

- 2025-06-27: VS Code/xtermソース分析に基づく初版作成